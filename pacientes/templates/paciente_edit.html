{% extends "base.html" %}

{% load static %}

{% block 'body' %}

<div class="min-h-screen flex items-center justify-center px-4 py-10 bg-center bg-no-repeat bg-cover" style="background-image: url('{% static "images/Background_app_psicologia.jpg" %}'); background-color: rgba(255, 255, 255, 0.5); background-size: 110% 110%; background-blend-mode: overlay;">

    <div class="py-1 sm:py-1">
        <div class="mx-auto grid max-w-7xl gap-10 px-6 lg:px-8">
        <div class="max-w-xl">
        
            <h2 class="text-pretty text-3xl font-semibold tracking-tight text-purple-900 sm:text-4xl">INFORMAÇÕES DO PACIENTE</h2>

            {% if messages %}
                {% for message in messages %}

                    <div class="mt-5 rounded-md {{message.tags}}">

                        <div class="flex">
                            
                            <div class="ml-3 py-2">

                                {{message}}

                            </div>
                        </div>
                    </div>

                {% endfor %}
            {% endif %}

            
            <form class = "mt-10" action="{% url 'paciente_edit' paciente.id %}" method="POST" enctype='multipart/form-data'> {% csrf_token %}
                <label for="paciente_nome" class="block mt-6 text-sm/6 font-medium text-purple-600">NOME DO PACIENTE</label>
                <div class="mt-3">
                    {% if paciente.paciente_nome %}
                        <input type="text" name="paciente_nome" id="paciente_nome" value="{{ paciente.paciente_nome }}" class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-purple-300 placeholder:text-purple-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                    {% else %}
                        <input type="text" name="paciente_nome" id="paciente_nome" placeholder="Insira o nome do paciente." autocomplete="given-name" class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-purple-300 placeholder:text-purple-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                    {% endif %}
                </div>

                <label for="paciente_email" class="block mt-4 text-sm/6 font-medium text-purple-600">E-MAIL DO PACIENTE</label>
                <div class="mt-3">
                    {% if paciente.paciente_email %}
                        <input type="text" name="paciente_email" id="paciente_email" value="{{ paciente.paciente_email }}" class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-purple-300 placeholder:text-purple-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                    {% else %}
                        <input type="text" name="paciente_email" id="paciente_email" placeholder="Insira o e-mail do paciente." autocomplete="given-name" class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-purple-300 placeholder:text-purple-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                    {% endif %}
                </div>

                <label for="paciente_telefone" class="block mt-4 text-sm/6 font-medium text-purple-600">TELEFONE DO PACIENTE</label>
                <div class="mt-3">
                    {% if paciente.paciente_telefone %}
                        <input type="text" name="paciente_telefone" id="paciente_telefone" value="{{ paciente.paciente_telefone }}" class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-purple-300 placeholder:text-purple-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                    {% else %}
                        <input type="text" name="paciente_telefone" id="paciente_telefone" placeholder="Enter a car year" autocomplete="given-name" class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-purple-300 placeholder:text-purple-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                    {% endif %}
                </div>

                <div>
                    <label class="block mt-4 text-sm/6 uppercase font-medium text-purple-600">DATA DE NASCIMENTO</label>
                    <div class="mt-2 flex gap-3">
                        <select name="paciente_dia" class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-purple-300 placeholder:text-purple-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                            <option disabled {% if not paciente.paciente_dia %}selected{% endif %}>Dia</option>
                            {% for paciente_dia in paciente_dias %}
                            <option value="{{paciente_dia.0}}" {% if paciente.paciente_dia == paciente_dia.0 %}selected{% endif %}>
                                {{paciente_dia.1}}
                            </option>
                            {% endfor %}
                        </select>

                        <select name="paciente_mes" class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-purple-300 placeholder:text-purple-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                            <option disabled {% if not paciente.paciente_mes %}selected{% endif %}>Mês</option>
                            {% for paciente_mes in paciente_meses %}
                            <option value="{{paciente_mes.0}}" {% if paciente.paciente_mes == paciente_mes.0 %}selected{% endif %}>
                                {{paciente_mes.1}}
                            </option>
                            {% endfor %}
                        </select>

                        <select name="paciente_ano" class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-purple-300 placeholder:text-purple-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                            <option disabled {% if not paciente.paciente_ano %}selected{% endif %}>Ano</option>
                            {% for paciente_ano in paciente_anos %}
                            <option value="{{paciente_ano.0}}" {% if paciente.paciente_ano == paciente_ano.0 %}selected{% endif %}>
                                {{paciente_ano.1}}
                            </option>
                            {% endfor %}
                        </select>
                    </div>
                </div>

                <div>
                    <label for="paciente_pais" class="block mt-4 uppercase text-sm/6 font-medium text-purple-600">PAÍS DE ORIGEM</label>
                    <div class="mt-3">
                        <select name="paciente_pais" class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-purple-300 placeholder:text-purple-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                            <option disabled {% if not paciente.paciente_pais %}selected{% endif %}>País</option>
                            {% for paciente_pais in paciente_paises %}
                            <option value="{{paciente_pais.0}}" {% if paciente.paciente_pais == paciente_pais.0 %}selected{% endif %}>
                                {{paciente_pais.1}}
                            </option>
                            {% endfor %}
                        </select>
                </div>

                <div>
                    <label for="paciente_queixa" class="block mt-4 text-sm/6 font-medium text-purple-600">QUEIXA</label>
                    <div class="mt-3">

                        <select name="paciente_queixa" class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-purple-300 placeholder:text-purple-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                            <option disabled {% if not paciente.paciente_queixa %}selected{% endif %}>Queixas</option>
                            {% for paciente_queixa in paciente_queixas %}
                            <option value="{{paciente_queixa.0}}" {% if paciente.paciente_queixa == paciente_queixa.0 %}selected{% endif %}>
                                {{paciente_queixa.1}}
                            </option>
                            {% endfor %}
                        </select>
                            
                    </div>
                </div>

                <div>
                    <label for="paciente_foto" class="block mt-4 text-sm/6 font-medium text-purple-600">FOTO DO PACIENTE</label>
                    
                    <div class="mt-3 flex items-center gap-6">

                        {% if paciente.paciente_foto %}
                            <div class="w-32 h-20 overflow-hidden border border-purple-900 rounded-md shadow-sm">
                                <img src="{{ paciente.paciente_foto.url }}" alt="Current foto" class="w-full h-full object-cover">
                            </div>
                        {% else %}
                            <p class="text-sm text-purple-400 italic">Não há foto.</p>
                        {% endif %}

                        <div>
                            <label for="paciente_foto" class="inline-flex justify-center rounded-md bg-purple-600 mt-2 cursor-pointer px-3 py-2 w-full text-sm font-semibold text-white shadow-sm hover:bg-purple-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-purple-600">Atualizar Foto</label>
                            <input type="file" name="paciente_foto" id="paciente_foto" class="hidden">
                        </div>

                    </div>
                </div>
  
                <button type="submit" class="inline-flex justify-center rounded-md bg-purple-600 mt-9 uppercase cursor-pointer px-3 py-2 w-full text-sm font-semibold text-white shadow-sm hover:bg-purple-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-purple-600">ATUALIZAR INFORMAÇÕES</button>
            </form>
        </div>
        </div>
                
        </div>
    </div>
    
</div>

{% endblock 'body' %}

{% block 'footer' %}
<footer class="bg-purple-900 text-purple-50 text-center py-4">
  © 2025 App Psicologia - Todos os direitos reservados.
</footer>
{% endblock 'footer' %}